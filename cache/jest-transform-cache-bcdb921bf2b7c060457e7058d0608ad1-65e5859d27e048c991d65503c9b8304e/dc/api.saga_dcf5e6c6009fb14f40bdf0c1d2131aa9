Object.defineProperty(exports,"__esModule",{value:true});var cov_sro7gzzdc=function(){var path='/Users/amitkumar/iTrueService/DevCode/iservice-app/app/redux/sagas/api/api.saga.js',hash='48c465abc3fa1e996750e90f6fb74bdd7899084d',global=new Function('return this')(),gcv='__coverage__',coverageData={path:'/Users/amitkumar/iTrueService/DevCode/iservice-app/app/redux/sagas/api/api.saga.js',statementMap:{'0':{start:{line:11,column:23},end:{line:28,column:1}},'1':{start:{line:31,column:27},end:{line:35,column:3}},'2':{start:{line:36,column:20},end:{line:36,column:68}},'3':{start:{line:37,column:18},end:{line:37,column:90}},'4':{start:{line:38,column:2},end:{line:43,column:4}},'5':{start:{line:47,column:20},end:{line:47,column:63}},'6':{start:{line:49,column:19},end:{line:49,column:23}},'7':{start:{line:49,column:38},end:{line:49,column:42}},'8':{start:{line:49,column:55},end:{line:49,column:59}},'9':{start:{line:50,column:2},end:{line:53,column:3}},'10':{start:{line:51,column:4},end:{line:51,column:42}},'11':{start:{line:51,column:23},end:{line:51,column:41}},'12':{start:{line:52,column:4},end:{line:52,column:42}},'13':{start:{line:52,column:23},end:{line:52,column:41}},'14':{start:{line:54,column:2},end:{line:61,column:3}},'15':{start:{line:55,column:4},end:{line:55,column:23}},'16':{start:{line:56,column:4},end:{line:56,column:46}},'17':{start:{line:57,column:4},end:{line:57,column:23}},'18':{start:{line:59,column:4},end:{line:59,column:23}},'19':{start:{line:60,column:4},end:{line:60,column:66}},'20':{start:{line:62,column:2},end:{line:62,column:18}}},fnMap:{'0':{name:'addDefaultApiConfig',decl:{start:{line:30,column:18},end:{line:30,column:37}},loc:{start:{line:30,column:51},end:{line:44,column:1}},line:30},'1':{name:'apiSaga',decl:{start:{line:46,column:26},end:{line:46,column:33}},loc:{start:{line:46,column:47},end:{line:63,column:1}},line:46},'2':{name:'(anonymous_2)',decl:{start:{line:51,column:17},end:{line:51,column:18}},loc:{start:{line:51,column:23},end:{line:51,column:41}},line:51},'3':{name:'(anonymous_3)',decl:{start:{line:52,column:17},end:{line:52,column:18}},loc:{start:{line:52,column:23},end:{line:52,column:41}},line:52}},branchMap:{'0':{loc:{start:{line:36,column:20},end:{line:36,column:68}},type:'binary-expr',locations:[{start:{line:36,column:20},end:{line:36,column:40}},{start:{line:36,column:44},end:{line:36,column:68}}],line:36},'1':{loc:{start:{line:50,column:2},end:{line:53,column:3}},type:'if',locations:[{start:{line:50,column:2},end:{line:53,column:3}},{start:{line:50,column:2},end:{line:53,column:3}}],line:50}},s:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0,'18':0,'19':0,'20':0},f:{'0':0,'1':0,'2':0,'3':0},b:{'0':[0,0],'1':[0,0]},_coverageSchema:'332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};exports.




























addDefaultApiConfig=addDefaultApiConfig;exports.default=















apiSaga;var _reactNativeConfig=require('react-native-config');var _reactNativeConfig2=_interopRequireDefault(_reactNativeConfig);var _apiEndpoints=require('../../../config/apiEndpoints.json');var _apiEndpoints2=_interopRequireDefault(_apiEndpoints);var _noop=require('lodash/noop');var _noop2=_interopRequireDefault(_noop);var _request=require('../../../utils/request.util');var _request2=_interopRequireDefault(_request);var _result=require('lodash/result');var _result2=_interopRequireDefault(_result);var _apiErrorHandler=require('./apiErrorHandler.saga');var _effects=require('redux-saga/effects');var _common=require('../../../utils/common.util');var _index=require('../../actions/index.actions');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var _marked=regeneratorRuntime.mark(addDefaultApiConfig),_marked2=regeneratorRuntime.mark(apiSaga);var defaultOptions=(cov_sro7gzzdc.s[0]++,{baseUrl:_reactNativeConfig2.default.SERVER_URL,endpoint:null,query:{},method:'GET',data:{},pathParam:'',path:null,intercept:true,loader:true,timeout:parseInt(_reactNativeConfig2.default.API_TIMEOUT),retryCount:0,headers:{'Authorization':'Bearer '+_reactNativeConfig2.default.ISERVICE_AUTH_TOKEN,'Accept':'application/json','Content-Type':'application/json'}});function addDefaultApiConfig(apiOptions){var headersFromState,pathParam,headers;return regeneratorRuntime.wrap(function addDefaultApiConfig$(_context){while(1){switch(_context.prev=_context.next){case 0:cov_sro7gzzdc.f[0]++;cov_sro7gzzdc.s[1]++;_context.next=4;return(0,_effects.select)((0,_common.getSelector)('user.accessToken'));case 4:_context.t0=_context.sent;_context.t1=''+_context.t0;_context.next=8;return(0,_effects.select)((0,_common.getSelector)('user.profile.idcard'));case 8:_context.t2=_context.sent;_context.t3=''+_context.t2;_context.next=12;return(0,_effects.select)((0,_common.getSelector)('user.profile.trueid.mobile'));case 12:_context.t4=_context.sent;_context.t5=''+_context.t4;headersFromState={'accesstoken':_context.t1,'icard':_context.t3,'msisdn':_context.t5};pathParam=(cov_sro7gzzdc.s[2]++,(cov_sro7gzzdc.b[0][0]++,apiOptions.pathParam)||(cov_sro7gzzdc.b[0][1]++,defaultOptions.pathParam));headers=(cov_sro7gzzdc.s[3]++,_extends({},defaultOptions.headers,headersFromState,apiOptions.headers));cov_sro7gzzdc.s[4]++;return _context.abrupt('return',_extends({},defaultOptions,apiOptions,{headers:headers,path:(0,_result2.default)(_apiEndpoints2.default,apiOptions.endpoint,'')+pathParam}));case 19:case'end':return _context.stop();}}},_marked,this);}function apiSaga(apiOptions){var apiConfig,showLoader,hideLoader,response;return regeneratorRuntime.wrap(function apiSaga$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:cov_sro7gzzdc.f[1]++;cov_sro7gzzdc.s[5]++;_context2.next=4;return(
(0,_effects.call)(addDefaultApiConfig,apiOptions));case 4:apiConfig=_context2.sent;

showLoader=(cov_sro7gzzdc.s[6]++,_noop2.default),hideLoader=(cov_sro7gzzdc.s[7]++,_noop2.default),response=(cov_sro7gzzdc.s[8]++,null);cov_sro7gzzdc.s[9]++;
if(apiConfig.loader){cov_sro7gzzdc.b[1][0]++;cov_sro7gzzdc.s[10]++;
showLoader=function showLoader(){cov_sro7gzzdc.f[2]++;cov_sro7gzzdc.s[11]++;return(0,_effects.put)((0,_index.showSpinner)());};cov_sro7gzzdc.s[12]++;
hideLoader=function hideLoader(){cov_sro7gzzdc.f[3]++;cov_sro7gzzdc.s[13]++;return(0,_effects.put)((0,_index.hideSpinner)());};
}else{cov_sro7gzzdc.b[1][1]++;}cov_sro7gzzdc.s[14]++;_context2.prev=9;cov_sro7gzzdc.s[15]++;_context2.next=13;return(

showLoader());case 13:cov_sro7gzzdc.s[16]++;_context2.next=16;return(
(0,_effects.call)(_request2.default,apiConfig));case 16:response=_context2.sent;cov_sro7gzzdc.s[17]++;_context2.next=20;return(
hideLoader());case 20:_context2.next=31;break;case 22:_context2.prev=22;_context2.t0=_context2['catch'](9);cov_sro7gzzdc.s[18]++;_context2.next=27;return(

hideLoader());case 27:cov_sro7gzzdc.s[19]++;_context2.next=30;return(
(0,_effects.call)(_apiErrorHandler.apiErrorHandler,_context2.t0,apiConfig));case 30:return _context2.abrupt('return',_context2.sent);case 31:cov_sro7gzzdc.s[20]++;return _context2.abrupt('return',

response);case 33:case'end':return _context2.stop();}}},_marked2,this,[[9,22]]);}