Object.defineProperty(exports,"__esModule",{value:true});exports.languageSelector=exports.networkSelector=undefined;var cov_cfmgod5vn=function(){var path='/Users/amitkumar/iTrueService/DevCode/iservice-app/app/redux/sagas/auth.saga.js',hash='cdb6bcbd738f770ec76075980206ca514f7b2c5b',global=new Function('return this')(),gcv='__coverage__',coverageData={path:'/Users/amitkumar/iTrueService/DevCode/iservice-app/app/redux/sagas/auth.saga.js',statementMap:{'0':{start:{line:11,column:21},end:{line:11,column:45}},'1':{start:{line:12,column:2},end:{line:24,column:3}},'2':{start:{line:13,column:24},end:{line:13,column:46}},'3':{start:{line:14,column:4},end:{line:14,column:49}},'4':{start:{line:16,column:4},end:{line:17,column:94}},'5':{start:{line:18,column:4},end:{line:20,column:5}},'6':{start:{line:19,column:6},end:{line:19,column:28}},'7':{start:{line:22,column:4},end:{line:22,column:33}},'8':{start:{line:23,column:4},end:{line:23,column:38}},'9':{start:{line:28,column:21},end:{line:28,column:45}},'10':{start:{line:29,column:2},end:{line:40,column:3}},'11':{start:{line:30,column:24},end:{line:30,column:49}},'12':{start:{line:31,column:4},end:{line:31,column:52}},'13':{start:{line:32,column:4},end:{line:33,column:94}},'14':{start:{line:34,column:4},end:{line:36,column:5}},'15':{start:{line:35,column:6},end:{line:35,column:28}},'16':{start:{line:38,column:4},end:{line:38,column:36}},'17':{start:{line:39,column:4},end:{line:39,column:41}},'18':{start:{line:44,column:21},end:{line:44,column:45}},'19':{start:{line:45,column:2},end:{line:54,column:3}},'20':{start:{line:46,column:4},end:{line:46,column:28}},'21':{start:{line:47,column:4},end:{line:47,column:39}},'22':{start:{line:48,column:4},end:{line:50,column:5}},'23':{start:{line:49,column:6},end:{line:49,column:28}},'24':{start:{line:52,column:4},end:{line:52,column:24}},'25':{start:{line:53,column:4},end:{line:53,column:39}},'26':{start:{line:58,column:19},end:{line:58,column:53}},'27':{start:{line:59,column:2},end:{line:59,column:44}},'28':{start:{line:62,column:31},end:{line:62,column:71}},'29':{start:{line:66,column:22},end:{line:66,column:51}},'30':{start:{line:67,column:21},end:{line:67,column:45}},'31':{start:{line:71,column:2},end:{line:77,column:3}},'32':{start:{line:72,column:34},end:{line:72,column:69}},'33':{start:{line:73,column:4},end:{line:73,column:71}},'34':{start:{line:74,column:4},end:{line:76,column:5}},'35':{start:{line:75,column:6},end:{line:75,column:28}},'36':{start:{line:80,column:32},end:{line:80,column:60}},'37':{start:{line:84,column:2},end:{line:97,column:3}},'38':{start:{line:85,column:21},end:{line:85,column:51}},'39':{start:{line:86,column:4},end:{line:86,column:36}},'40':{start:{line:87,column:4},end:{line:87,column:101}},'41':{start:{line:89,column:4},end:{line:89,column:24}},'42':{start:{line:91,column:4},end:{line:96,column:6}},'43':{start:{line:102,column:2},end:{line:102,column:70}},'44':{start:{line:103,column:2},end:{line:103,column:49}},'45':{start:{line:104,column:2},end:{line:104,column:55}},'46':{start:{line:105,column:2},end:{line:105,column:51}},'47':{start:{line:106,column:2},end:{line:106,column:64}}},fnMap:{'0':{name:'login',decl:{start:{line:10,column:17},end:{line:10,column:22}},loc:{start:{line:10,column:32},end:{line:25,column:1}},line:10},'1':{name:'register',decl:{start:{line:27,column:17},end:{line:27,column:25}},loc:{start:{line:27,column:35},end:{line:41,column:1}},line:27},'2':{name:'logout',decl:{start:{line:43,column:17},end:{line:43,column:23}},loc:{start:{line:43,column:33},end:{line:55,column:1}},line:43},'3':{name:'updateAuthLanguage',decl:{start:{line:57,column:17},end:{line:57,column:35}},loc:{start:{line:57,column:45},end:{line:60,column:1}},line:57},'4':{name:'verifyExistingLogin',decl:{start:{line:64,column:17},end:{line:64,column:36}},loc:{start:{line:64,column:46},end:{line:78,column:1}},line:64},'5':{name:'initializeAuth',decl:{start:{line:83,column:17},end:{line:83,column:31}},loc:{start:{line:83,column:35},end:{line:98,column:1}},line:83},'6':{name:'authSaga',decl:{start:{line:101,column:25},end:{line:101,column:33}},loc:{start:{line:101,column:37},end:{line:107,column:1}},line:101}},branchMap:{'0':{loc:{start:{line:11,column:21},end:{line:11,column:45}},type:'binary-expr',locations:[{start:{line:11,column:21},end:{line:11,column:27}},{start:{line:11,column:31},end:{line:11,column:45}}],line:11},'1':{loc:{start:{line:18,column:4},end:{line:20,column:5}},type:'if',locations:[{start:{line:18,column:4},end:{line:20,column:5}},{start:{line:18,column:4},end:{line:20,column:5}}],line:18},'2':{loc:{start:{line:28,column:21},end:{line:28,column:45}},type:'binary-expr',locations:[{start:{line:28,column:21},end:{line:28,column:27}},{start:{line:28,column:31},end:{line:28,column:45}}],line:28},'3':{loc:{start:{line:34,column:4},end:{line:36,column:5}},type:'if',locations:[{start:{line:34,column:4},end:{line:36,column:5}},{start:{line:34,column:4},end:{line:36,column:5}}],line:34},'4':{loc:{start:{line:44,column:21},end:{line:44,column:45}},type:'binary-expr',locations:[{start:{line:44,column:21},end:{line:44,column:27}},{start:{line:44,column:31},end:{line:44,column:45}}],line:44},'5':{loc:{start:{line:48,column:4},end:{line:50,column:5}},type:'if',locations:[{start:{line:48,column:4},end:{line:50,column:5}},{start:{line:48,column:4},end:{line:50,column:5}}],line:48},'6':{loc:{start:{line:67,column:21},end:{line:67,column:45}},type:'binary-expr',locations:[{start:{line:67,column:21},end:{line:67,column:27}},{start:{line:67,column:31},end:{line:67,column:45}}],line:67},'7':{loc:{start:{line:71,column:2},end:{line:77,column:3}},type:'if',locations:[{start:{line:71,column:2},end:{line:77,column:3}},{start:{line:71,column:2},end:{line:77,column:3}}],line:71},'8':{loc:{start:{line:74,column:4},end:{line:76,column:5}},type:'if',locations:[{start:{line:74,column:4},end:{line:76,column:5}},{start:{line:74,column:4},end:{line:76,column:5}}],line:74}},s:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0,'18':0,'19':0,'20':0,'21':0,'22':0,'23':0,'24':0,'25':0,'26':0,'27':0,'28':0,'29':0,'30':0,'31':0,'32':0,'33':0,'34':0,'35':0,'36':0,'37':0,'38':0,'39':0,'40':0,'41':0,'42':0,'43':0,'44':0,'45':0,'46':0,'47':0},f:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0},b:{'0':[0,0],'1':[0,0],'2':[0,0],'3':[0,0],'4':[0,0],'5':[0,0],'6':[0,0],'7':[0,0],'8':[0,0]},_coverageSchema:'332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();exports.








login=login;exports.
















register=register;exports.















logout=logout;exports.













updateAuthLanguage=updateAuthLanguage;exports.






verifyExistingLogin=verifyExistingLogin;exports.


















initializeAuth=initializeAuth;exports.default=

















authSaga;var _auth=require('../../utils/auth.util');var _auth2=_interopRequireDefault(_auth);var _result=require('lodash/result');var _result2=_interopRequireDefault(_result);var _effects=require('redux-saga/effects');var _common=require('../../utils/common.util');var _reactNavigation=require('react-navigation');var _analytics=require('../../utils/analytics.util');var _index=require('../actions/index.actions');var actions=_interopRequireWildcard(_index);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var _marked=regeneratorRuntime.mark(login),_marked2=regeneratorRuntime.mark(register),_marked3=regeneratorRuntime.mark(logout),_marked4=regeneratorRuntime.mark(updateAuthLanguage),_marked5=regeneratorRuntime.mark(verifyExistingLogin),_marked6=regeneratorRuntime.mark(initializeAuth),_marked7=regeneratorRuntime.mark(authSaga);function login(action){var nextAction,userProfile;return regeneratorRuntime.wrap(function login$(_context){while(1){switch(_context.prev=_context.next){case 0:cov_cfmgod5vn.f[0]++;nextAction=(cov_cfmgod5vn.s[0]++,(cov_cfmgod5vn.b[0][0]++,action)&&(cov_cfmgod5vn.b[0][1]++,action.payload));cov_cfmgod5vn.s[1]++;_context.prev=3;cov_cfmgod5vn.s[2]++;_context.next=7;return(0,_effects.call)(_auth2.default.login);case 7:userProfile=_context.sent;cov_cfmgod5vn.s[3]++;_context.next=11;return(0,_effects.put)(actions.loginSuccess(userProfile));case 11:cov_cfmgod5vn.s[4]++;_context.next=14;return(0,_effects.call)(_analytics.setDimension,{SSOID:(0,_result2.default)(userProfile,'uid',''),FB_ID:(0,_result2.default)(userProfile,'facebook_id','')});case 14:cov_cfmgod5vn.s[5]++;if(!nextAction){_context.next=22;break;}cov_cfmgod5vn.b[1][0]++;cov_cfmgod5vn.s[6]++;_context.next=20;return(0,_effects.put)(nextAction);case 20:_context.next=23;break;case 22:cov_cfmgod5vn.b[1][1]++;case 23:_context.next=32;break;case 25:_context.prev=25;_context.t0=_context['catch'](3);cov_cfmgod5vn.s[7]++;(0,_auth.handleAuthErrors)(_context.t0,'LOGIN');cov_cfmgod5vn.s[8]++;_context.next=32;return(0,_effects.put)(actions.loginFailure());case 32:case'end':return _context.stop();}}},_marked,this,[[3,25]]);}function register(action){var nextAction,userProfile;return regeneratorRuntime.wrap(function register$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:cov_cfmgod5vn.f[1]++;nextAction=(cov_cfmgod5vn.s[9]++,(cov_cfmgod5vn.b[2][0]++,action)&&(cov_cfmgod5vn.b[2][1]++,action.payload));cov_cfmgod5vn.s[10]++;_context2.prev=3;cov_cfmgod5vn.s[11]++;_context2.next=7;return(0,_effects.call)(_auth2.default.register);case 7:userProfile=_context2.sent;cov_cfmgod5vn.s[12]++;_context2.next=11;return(0,_effects.put)(actions.registerSuccess(userProfile));case 11:cov_cfmgod5vn.s[13]++;_context2.next=14;return(0,_effects.call)(_analytics.setDimension,{SSOID:(0,_result2.default)(userProfile,'uid',''),FB_ID:(0,_result2.default)(userProfile,'facebook_id','')});case 14:cov_cfmgod5vn.s[14]++;if(!nextAction){_context2.next=22;break;}cov_cfmgod5vn.b[3][0]++;cov_cfmgod5vn.s[15]++;_context2.next=20;return(0,_effects.put)(nextAction);case 20:_context2.next=23;break;case 22:cov_cfmgod5vn.b[3][1]++;case 23:_context2.next=32;break;case 25:_context2.prev=25;_context2.t0=_context2['catch'](3);cov_cfmgod5vn.s[16]++;(0,_auth.handleAuthErrors)(_context2.t0,'REGISTER');cov_cfmgod5vn.s[17]++;_context2.next=32;return(0,_effects.put)(actions.registerFailure());case 32:case'end':return _context2.stop();}}},_marked2,this,[[3,25]]);}function logout(action){var nextAction;return regeneratorRuntime.wrap(function logout$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:cov_cfmgod5vn.f[2]++;nextAction=(cov_cfmgod5vn.s[18]++,(cov_cfmgod5vn.b[4][0]++,action)&&(cov_cfmgod5vn.b[4][1]++,action.payload));cov_cfmgod5vn.s[19]++;_context3.prev=3;cov_cfmgod5vn.s[20]++;_context3.next=7;return(0,_effects.call)(_auth2.default.logout);case 7:cov_cfmgod5vn.s[21]++;_context3.next=10;return(0,_effects.put)(actions.logoutSuccess());case 10:cov_cfmgod5vn.s[22]++;if(!nextAction){_context3.next=18;break;}cov_cfmgod5vn.b[5][0]++;cov_cfmgod5vn.s[23]++;_context3.next=16;return(0,_effects.put)(nextAction);case 16:_context3.next=19;break;case 18:cov_cfmgod5vn.b[5][1]++;case 19:_context3.next=28;break;case 21:_context3.prev=21;_context3.t0=_context3['catch'](3);cov_cfmgod5vn.s[24]++;(0,_auth.handleAuthErrors)(_context3.t0);cov_cfmgod5vn.s[25]++;_context3.next=28;return(0,_effects.put)(actions.logoutFailure());case 28:case'end':return _context3.stop();}}},_marked3,this,[[3,21]]);}function updateAuthLanguage(action){var language;return regeneratorRuntime.wrap(function updateAuthLanguage$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:cov_cfmgod5vn.f[3]++;language=(cov_cfmgod5vn.s[26]++,(0,_result2.default)(action,'payload.language'));cov_cfmgod5vn.s[27]++;_context4.next=5;return(0,_effects.call)(_auth2.default.updateLanguage,language);case 5:case'end':return _context4.stop();}}},_marked4,this);}var networkSelector=exports.networkSelector=(cov_cfmgod5vn.s[28]++,(0,_common.getSelector)('networkStatus.isConnected'));function verifyExistingLogin(action){var isConnected,nextAction,accessTokenAndProfile;return regeneratorRuntime.wrap(function verifyExistingLogin$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:cov_cfmgod5vn.f[4]++;cov_cfmgod5vn.s[29]++;_context5.next=4;return(0,_effects.select)(networkSelector);case 4:isConnected=_context5.sent;nextAction=(cov_cfmgod5vn.s[30]++,(cov_cfmgod5vn.b[6][0]++,action)&&(cov_cfmgod5vn.b[6][1]++,action.payload));cov_cfmgod5vn.s[31]++;if(!isConnected){_context5.next=27;break;}cov_cfmgod5vn.b[7][0]++;cov_cfmgod5vn.s[32]++;_context5.next=12;return(0,_effects.call)(_auth2.default.checkExistingLogin);case 12:accessTokenAndProfile=_context5.sent;cov_cfmgod5vn.s[33]++;_context5.next=16;return(0,_effects.put)(actions.setAccessTokenAndProfile(accessTokenAndProfile));case 16:cov_cfmgod5vn.s[34]++;if(!nextAction){_context5.next=24;break;}cov_cfmgod5vn.b[8][0]++;cov_cfmgod5vn.s[35]++;_context5.next=22;return(0,_effects.put)(nextAction);case 22:_context5.next=25;break;case 24:cov_cfmgod5vn.b[8][1]++;case 25:_context5.next=28;break;case 27:cov_cfmgod5vn.b[7][1]++;case 28:case'end':return _context5.stop();}}},_marked5,this);}var languageSelector=exports.languageSelector=(cov_cfmgod5vn.s[36]++,(0,_common.getSelector)('user.language'));function initializeAuth(){var language;return regeneratorRuntime.wrap(function initializeAuth$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:cov_cfmgod5vn.f[5]++;cov_cfmgod5vn.s[37]++;_context6.prev=2;cov_cfmgod5vn.s[38]++;_context6.next=6;return(0,_effects.select)(languageSelector);case 6:language=_context6.sent;cov_cfmgod5vn.s[39]++;_context6.next=10;return(0,_effects.call)(_auth2.default.init,language);case 10:cov_cfmgod5vn.s[40]++;_context6.next=13;return(0,_effects.call)(verifyExistingLogin,{payload:_reactNavigation.NavigationActions.navigate({routeName:'BillUsage'})});case 13:_context6.next=22;break;case 15:_context6.prev=15;_context6.t0=_context6['catch'](2);cov_cfmgod5vn.s[41]++;(0,_auth.handleAuthErrors)(_context6.t0);cov_cfmgod5vn.s[42]++;_context6.next=22;return(0,_effects.put)(_reactNavigation.NavigationActions.reset({index:0,actions:[_reactNavigation.NavigationActions.navigate({routeName:'Landing'})]}));case 22:case'end':return _context6.stop();}}},_marked6,this,[[2,15]]);}function authSaga(){return regeneratorRuntime.wrap(function authSaga$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:cov_cfmgod5vn.f[6]++;cov_cfmgod5vn.s[43]++;_context7.next=4;return(
(0,_effects.takeLatest)(actions.CHECK_EXISTING_LOGIN,verifyExistingLogin));case 4:cov_cfmgod5vn.s[44]++;_context7.next=7;return(
(0,_effects.takeLatest)(actions.LOGIN_REQUEST,login));case 7:cov_cfmgod5vn.s[45]++;_context7.next=10;return(
(0,_effects.takeLatest)(actions.REGISTER_REQUEST,register));case 10:cov_cfmgod5vn.s[46]++;_context7.next=13;return(
(0,_effects.takeLatest)(actions.LOGOUT_REQUEST,logout));case 13:cov_cfmgod5vn.s[47]++;_context7.next=16;return(
(0,_effects.takeLatest)(actions.CHANGE_LANGUAGE,updateAuthLanguage));case 16:case'end':return _context7.stop();}}},_marked7,this);}