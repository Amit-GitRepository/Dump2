Object.defineProperty(exports,"__esModule",{value:true});exports.ssoidSelector=undefined;var cov_4yzgumbf2=function(){var path='/Users/amitkumar/iTrueService/DevCode/iservice-app/app/redux/sagas/user.saga.js',hash='329da26b28e9ad2837b4f6902d023f8d624ae4aa',global=new Function('return this')(),gcv='__coverage__',coverageData={path:'/Users/amitkumar/iTrueService/DevCode/iservice-app/app/redux/sagas/user.saga.js',statementMap:{'0':{start:{line:13,column:29},end:{line:13,column:60}},'1':{start:{line:17,column:19},end:{line:17,column:53}},'2':{start:{line:18,column:2},end:{line:18,column:37}},'3':{start:{line:19,column:2},end:{line:19,column:36}},'4':{start:{line:23,column:19},end:{line:23,column:53}},'5':{start:{line:24,column:2},end:{line:24,column:37}},'6':{start:{line:25,column:2},end:{line:25,column:36}},'7':{start:{line:26,column:2},end:{line:30,column:3}},'8':{start:{line:27,column:4},end:{line:27,column:90}},'9':{start:{line:34,column:16},end:{line:34,column:43}},'10':{start:{line:35,column:2},end:{line:40,column:3}},'11':{start:{line:36,column:18},end:{line:36,column:43}},'12':{start:{line:37,column:4},end:{line:37,column:52}},'13':{start:{line:44,column:2},end:{line:49,column:3}},'14':{start:{line:45,column:18},end:{line:45,column:43}},'15':{start:{line:46,column:4},end:{line:46,column:47}},'16':{start:{line:53,column:2},end:{line:53,column:52}},'17':{start:{line:54,column:2},end:{line:54,column:52}},'18':{start:{line:55,column:2},end:{line:55,column:61}},'19':{start:{line:56,column:2},end:{line:56,column:65}}},fnMap:{'0':{name:'setPreferences',decl:{start:{line:16,column:17},end:{line:16,column:31}},loc:{start:{line:16,column:41},end:{line:20,column:1}},line:16},'1':{name:'updateLanguage',decl:{start:{line:22,column:17},end:{line:22,column:31}},loc:{start:{line:22,column:41},end:{line:31,column:1}},line:22},'2':{name:'registerFCMTokenOnMS',decl:{start:{line:33,column:17},end:{line:33,column:37}},loc:{start:{line:33,column:41},end:{line:41,column:1}},line:33},'3':{name:'deregisterFCMTokenOnMS',decl:{start:{line:43,column:17},end:{line:43,column:39}},loc:{start:{line:43,column:43},end:{line:50,column:1}},line:43},'4':{name:'userSaga',decl:{start:{line:52,column:25},end:{line:52,column:33}},loc:{start:{line:52,column:37},end:{line:57,column:1}},line:52}},branchMap:{},s:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0,'18':0,'19':0},f:{'0':0,'1':0,'2':0,'3':0,'4':0},b:{},_coverageSchema:'332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();exports.














setPreferences=setPreferences;exports.





updateLanguage=updateLanguage;exports.










registerFCMTokenOnMS=registerFCMTokenOnMS;exports.









deregisterFCMTokenOnMS=deregisterFCMTokenOnMS;exports.default=








userSaga;var _api=require('./api/api.saga');var _api2=_interopRequireDefault(_api);var _dbKeys=require('../../config/dbKeys.config');var _dbKeys2=_interopRequireDefault(_dbKeys);var _localStorage=require('../../utils/localStorage.util');var _localStorage2=_interopRequireDefault(_localStorage);var _result=require('lodash/result');var _result2=_interopRequireDefault(_result);var _effects=require('redux-saga/effects');var _index=require('../actions/index.actions');var _helper=require('../../language/i18n/helper');var _apiHelper=require('./api/apiHelper');var _firebase=require('../../utils/firebase.util');var _common=require('../../utils/common.util');var _moment=require('../../utils/moment.util');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var _marked=regeneratorRuntime.mark(setPreferences),_marked2=regeneratorRuntime.mark(updateLanguage),_marked3=regeneratorRuntime.mark(registerFCMTokenOnMS),_marked4=regeneratorRuntime.mark(deregisterFCMTokenOnMS),_marked5=regeneratorRuntime.mark(userSaga);var ssoidSelector=exports.ssoidSelector=(cov_4yzgumbf2.s[0]++,(0,_common.getSelector)('user.profile.uid'));function setPreferences(action){var language;return regeneratorRuntime.wrap(function setPreferences$(_context){while(1){switch(_context.prev=_context.next){case 0:cov_4yzgumbf2.f[0]++;language=(cov_4yzgumbf2.s[1]++,(0,_result2.default)(action,'payload.language'));cov_4yzgumbf2.s[2]++;_context.next=5;return(0,_effects.call)(_helper.changeLocale,language);case 5:cov_4yzgumbf2.s[3]++;_context.next=8;return(0,_effects.call)(_moment.setLanguage,language);case 8:case'end':return _context.stop();}}},_marked,this);}function updateLanguage(action){var language;return regeneratorRuntime.wrap(function updateLanguage$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:cov_4yzgumbf2.f[1]++;language=(cov_4yzgumbf2.s[4]++,(0,_result2.default)(action,'payload.language'));cov_4yzgumbf2.s[5]++;_context2.next=5;return(0,_effects.call)(_helper.changeLocale,language);case 5:cov_4yzgumbf2.s[6]++;_context2.next=8;return(0,_effects.call)(_moment.setLanguage,language);case 8:cov_4yzgumbf2.s[7]++;_context2.prev=9;cov_4yzgumbf2.s[8]++;_context2.next=13;return(0,_effects.call)(_localStorage2.default.updateItem,_dbKeys2.default.USER_PREFERENCE_KEY,{language:language});case 13:_context2.next=17;break;case 15:_context2.prev=15;_context2.t0=_context2['catch'](9);case 17:case'end':return _context2.stop();}}},_marked2,this,[[9,15]]);}function registerFCMTokenOnMS(){var ssoid,token;return regeneratorRuntime.wrap(function registerFCMTokenOnMS$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:cov_4yzgumbf2.f[2]++;cov_4yzgumbf2.s[9]++;_context3.next=4;return(0,_effects.select)(ssoidSelector);case 4:ssoid=_context3.sent;cov_4yzgumbf2.s[10]++;_context3.prev=6;cov_4yzgumbf2.s[11]++;_context3.next=10;return(0,_effects.call)(_firebase.fetchFCMToken);case 10:token=_context3.sent;cov_4yzgumbf2.s[12]++;_context3.next=14;return(0,_effects.call)(_api2.default,(0,_apiHelper.registerFCMToken)(ssoid,token));case 14:_context3.next=18;break;case 16:_context3.prev=16;_context3.t0=_context3['catch'](6);case 18:case'end':return _context3.stop();}}},_marked3,this,[[6,16]]);}function deregisterFCMTokenOnMS(){var token;return regeneratorRuntime.wrap(function deregisterFCMTokenOnMS$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:cov_4yzgumbf2.f[3]++;cov_4yzgumbf2.s[13]++;_context4.prev=2;cov_4yzgumbf2.s[14]++;_context4.next=6;return(0,_effects.call)(_firebase.fetchFCMToken);case 6:token=_context4.sent;cov_4yzgumbf2.s[15]++;_context4.next=10;return(0,_effects.call)(_api2.default,(0,_apiHelper.deregisterFCMToken)(token));case 10:_context4.next=14;break;case 12:_context4.prev=12;_context4.t0=_context4['catch'](2);case 14:case'end':return _context4.stop();}}},_marked4,this,[[2,12]]);}function userSaga(){return regeneratorRuntime.wrap(function userSaga$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:cov_4yzgumbf2.f[4]++;cov_4yzgumbf2.s[16]++;_context5.next=4;return(
(0,_effects.takeLatest)(_index.CHANGE_LANGUAGE,updateLanguage));case 4:cov_4yzgumbf2.s[17]++;_context5.next=7;return(
(0,_effects.takeLatest)(_index.SET_PREFERENCES,setPreferences));case 7:cov_4yzgumbf2.s[18]++;_context5.next=10;return(
(0,_effects.takeLatest)(_index.REGISTER_FCM_TOKEN,registerFCMTokenOnMS));case 10:cov_4yzgumbf2.s[19]++;_context5.next=13;return(
(0,_effects.takeLatest)(_index.DEREGISTER_FCM_TOKEN,deregisterFCMTokenOnMS));case 13:case'end':return _context5.stop();}}},_marked5,this);}