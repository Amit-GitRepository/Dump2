Object.defineProperty(exports,"__esModule",{value:true});exports.productDetailSelector=exports.productListSelector=exports.msisdnSelector=undefined;var cov_pa8ce6u63=function(){var path='/Users/amitkumar/iTrueService/DevCode/iservice-app/app/redux/sagas/billUsage.saga.js',hash='6cf8f3ced05b327d0ef5268940be686ebb0817de',global=new Function('return this')(),gcv='__coverage__',coverageData={path:'/Users/amitkumar/iTrueService/DevCode/iservice-app/app/redux/sagas/billUsage.saga.js',statementMap:{'0':{start:{line:10,column:30},end:{line:10,column:71}},'1':{start:{line:11,column:35},end:{line:11,column:71}},'2':{start:{line:12,column:37},end:{line:12,column:75}},'3':{start:{line:15,column:2},end:{line:21,column:3}},'4':{start:{line:16,column:19},end:{line:16,column:47}},'5':{start:{line:17,column:24},end:{line:17,column:69}},'6':{start:{line:18,column:4},end:{line:18,column:65}},'7':{start:{line:25,column:17},end:{line:25,column:45}},'8':{start:{line:26,column:38},end:{line:26,column:45}},'9':{start:{line:27,column:24},end:{line:27,column:85}},'10':{start:{line:28,column:2},end:{line:28,column:102}},'11':{start:{line:32,column:2},end:{line:38,column:3}},'12':{start:{line:33,column:40},end:{line:33,column:47}},'13':{start:{line:34,column:23},end:{line:34,column:80}},'14':{start:{line:35,column:4},end:{line:35,column:105}},'15':{start:{line:42,column:2},end:{line:49,column:3}},'16':{start:{line:43,column:19},end:{line:43,column:47}},'17':{start:{line:44,column:40},end:{line:44,column:47}},'18':{start:{line:45,column:33},end:{line:45,column:94}},'19':{start:{line:46,column:4},end:{line:46,column:111}},'20':{start:{line:53,column:38},end:{line:53,column:45}},'21':{start:{line:54,column:2},end:{line:69,column:3}},'22':{start:{line:55,column:29},end:{line:55,column:64}},'23':{start:{line:56,column:34},end:{line:56,column:98}},'24':{start:{line:57,column:4},end:{line:61,column:5}},'25':{start:{line:59,column:6},end:{line:60,column:79}},'26':{start:{line:62,column:24},end:{line:62,column:57}},'27':{start:{line:63,column:29},end:{line:63,column:70}},'28':{start:{line:64,column:28},end:{line:64,column:72}},'29':{start:{line:65,column:4},end:{line:65,column:129}},'30':{start:{line:67,column:4},end:{line:67,column:105}},'31':{start:{line:83,column:2},end:{line:83,column:73}},'32':{start:{line:84,column:2},end:{line:84,column:92}},'33':{start:{line:85,column:2},end:{line:85,column:86}},'34':{start:{line:86,column:2},end:{line:86,column:98}}},fnMap:{'0':{name:'fetchProductList',decl:{start:{line:14,column:17},end:{line:14,column:33}},loc:{start:{line:14,column:37},end:{line:22,column:1}},line:14},'1':{name:'fetchProductDetail',decl:{start:{line:24,column:17},end:{line:24,column:35}},loc:{start:{line:24,column:48},end:{line:29,column:1}},line:24},'2':{name:'fetchProductBillDetail',decl:{start:{line:31,column:17},end:{line:31,column:39}},loc:{start:{line:31,column:52},end:{line:39,column:1}},line:31},'3':{name:'fetchPrepaidProductDetail',decl:{start:{line:41,column:17},end:{line:41,column:42}},loc:{start:{line:41,column:55},end:{line:50,column:1}},line:41},'4':{name:'toggleProductCollapseStatus',decl:{start:{line:52,column:17},end:{line:52,column:44}},loc:{start:{line:52,column:57},end:{line:70,column:1}},line:52},'5':{name:'billUsageSaga',decl:{start:{line:82,column:25},end:{line:82,column:38}},loc:{start:{line:82,column:42},end:{line:88,column:1}},line:82}},branchMap:{'0':{loc:{start:{line:57,column:4},end:{line:61,column:5}},type:'if',locations:[{start:{line:57,column:4},end:{line:61,column:5}},{start:{line:57,column:4},end:{line:61,column:5}}],line:57},'1':{loc:{start:{line:59,column:6},end:{line:60,column:78}},type:'cond-expr',locations:[{start:{line:59,column:39},end:{line:59,column:116}},{start:{line:60,column:8},end:{line:60,column:78}}],line:59},'2':{loc:{start:{line:64,column:28},end:{line:64,column:72}},type:'binary-expr',locations:[{start:{line:64,column:28},end:{line:64,column:66}},{start:{line:64,column:70},end:{line:64,column:72}}],line:64}},s:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0,'18':0,'19':0,'20':0,'21':0,'22':0,'23':0,'24':0,'25':0,'26':0,'27':0,'28':0,'29':0,'30':0,'31':0,'32':0,'33':0,'34':0},f:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0},b:{'0':[0,0],'1':[0,0],'2':[0,0]},_coverageSchema:'332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();exports.












fetchProductList=fetchProductList;exports.









fetchProductDetail=fetchProductDetail;exports.






fetchProductBillDetail=fetchProductBillDetail;exports.









fetchPrepaidProductDetail=fetchPrepaidProductDetail;exports.










toggleProductCollapseStatus=toggleProductCollapseStatus;exports.default=





























billUsageSaga;var _api=require('./api/api.saga');var _api2=_interopRequireDefault(_api);var _find=require('lodash/find');var _find2=_interopRequireDefault(_find);var _result=require('lodash/result');var _result2=_interopRequireDefault(_result);var _apiHelper=require('./api/apiHelper');var _effects=require('redux-saga/effects');var _common=require('../../utils/common.util');var _index=require('../actions/index.actions');var actions=_interopRequireWildcard(_index);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var _marked=regeneratorRuntime.mark(fetchProductList),_marked2=regeneratorRuntime.mark(fetchProductDetail),_marked3=regeneratorRuntime.mark(fetchProductBillDetail),_marked4=regeneratorRuntime.mark(fetchPrepaidProductDetail),_marked5=regeneratorRuntime.mark(toggleProductCollapseStatus),_marked6=regeneratorRuntime.mark(billUsageSaga);var msisdnSelector=exports.msisdnSelector=(cov_pa8ce6u63.s[0]++,(0,_common.getSelector)('user.profile.trueid.mobile'));var productListSelector=exports.productListSelector=(cov_pa8ce6u63.s[1]++,(0,_common.getSelector)('billUsage.productList'));var productDetailSelector=exports.productDetailSelector=(cov_pa8ce6u63.s[2]++,(0,_common.getSelector)('billUsage.productDetail'));function fetchProductList(){var msisdn,productList;return regeneratorRuntime.wrap(function fetchProductList$(_context){while(1){switch(_context.prev=_context.next){case 0:cov_pa8ce6u63.f[0]++;cov_pa8ce6u63.s[3]++;_context.prev=2;cov_pa8ce6u63.s[4]++;_context.next=6;return(0,_effects.select)(msisdnSelector);case 6:msisdn=_context.sent;cov_pa8ce6u63.s[5]++;_context.next=10;return(0,_effects.call)(_api2.default,(0,_apiHelper.billUsageProductList)(msisdn));case 10:productList=_context.sent;cov_pa8ce6u63.s[6]++;_context.next=14;return(0,_effects.put)(actions.setBillUsageProductList(productList.body));case 14:_context.next=18;break;case 16:_context.prev=16;_context.t0=_context['catch'](2);case 18:case'end':return _context.stop();}}},_marked,this,[[2,16]]);}function fetchProductDetail(_ref){var payload=_ref.payload;var msisdn,_ref2,subscriberId,productType,productDetail;return regeneratorRuntime.wrap(function fetchProductDetail$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:cov_pa8ce6u63.f[1]++;cov_pa8ce6u63.s[7]++;_context2.next=4;return(0,_effects.select)(msisdnSelector);case 4:msisdn=_context2.sent;_ref2=(cov_pa8ce6u63.s[8]++,payload),subscriberId=_ref2.subscriberId,productType=_ref2.productType;cov_pa8ce6u63.s[9]++;_context2.next=9;return(0,_effects.call)(_api2.default,(0,_apiHelper.billUsageProductDetail)(msisdn,subscriberId));case 9:productDetail=_context2.sent;cov_pa8ce6u63.s[10]++;_context2.next=13;return(0,_effects.put)(actions.setBillUsageProductDetail({productType:productType,subscriberId:subscriberId,data:productDetail.body}));case 13:case'end':return _context2.stop();}}},_marked2,this);}function fetchProductBillDetail(_ref3){var payload=_ref3.payload;var _ref4,subscriberId,productType,billDetail;return regeneratorRuntime.wrap(function fetchProductBillDetail$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:cov_pa8ce6u63.f[2]++;cov_pa8ce6u63.s[11]++;_context3.prev=2;_ref4=(cov_pa8ce6u63.s[12]++,payload),subscriberId=_ref4.subscriberId,productType=_ref4.productType;cov_pa8ce6u63.s[13]++;_context3.next=7;return(0,_effects.call)(_api2.default,(0,_apiHelper.billUsageProductBillDetail)(subscriberId));case 7:billDetail=_context3.sent;cov_pa8ce6u63.s[14]++;_context3.next=11;return(0,_effects.put)(actions.setBillUsageProductBillDetail({productType:productType,subscriberId:subscriberId,data:billDetail.body}));case 11:_context3.next=15;break;case 13:_context3.prev=13;_context3.t0=_context3['catch'](2);case 15:case'end':return _context3.stop();}}},_marked3,this,[[2,13]]);}function fetchPrepaidProductDetail(_ref5){var payload=_ref5.payload;var msisdn,_ref6,subscriberId,productType,prepaidProductDetail;return regeneratorRuntime.wrap(function fetchPrepaidProductDetail$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:cov_pa8ce6u63.f[3]++;cov_pa8ce6u63.s[15]++;_context4.prev=2;cov_pa8ce6u63.s[16]++;_context4.next=6;return(0,_effects.select)(msisdnSelector);case 6:msisdn=_context4.sent;_ref6=(cov_pa8ce6u63.s[17]++,payload),subscriberId=_ref6.subscriberId,productType=_ref6.productType;cov_pa8ce6u63.s[18]++;_context4.next=11;return(0,_effects.call)(_api2.default,(0,_apiHelper.billUsagePrepaidDetail)(msisdn,subscriberId));case 11:prepaidProductDetail=_context4.sent;cov_pa8ce6u63.s[19]++;_context4.next=15;return(0,_effects.put)(actions.setBillUsageProductDetail({productType:productType,subscriberId:subscriberId,data:prepaidProductDetail.body}));case 15:_context4.next=19;break;case 17:_context4.prev=17;_context4.t0=_context4['catch'](2);case 19:case'end':return _context4.stop();}}},_marked4,this,[[2,17]]);}function toggleProductCollapseStatus(_ref7){var payload=_ref7.payload;var _ref8,subscriberId,productType,allProductDetail,selectedProductDetail,productList,productGroupList,selectedProduct;return regeneratorRuntime.wrap(function toggleProductCollapseStatus$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:cov_pa8ce6u63.f[4]++;_ref8=(cov_pa8ce6u63.s[20]++,payload),subscriberId=_ref8.subscriberId,productType=_ref8.productType;cov_pa8ce6u63.s[21]++;_context5.prev=3;cov_pa8ce6u63.s[22]++;_context5.next=7;return(0,_effects.select)(productDetailSelector);case 7:allProductDetail=_context5.sent;selectedProductDetail=(cov_pa8ce6u63.s[23]++,(0,_result2.default)(allProductDetail,productType+'.'+subscriberId,null));cov_pa8ce6u63.s[24]++;if(selectedProductDetail){_context5.next=24;break;}cov_pa8ce6u63.b[0][0]++;cov_pa8ce6u63.s[25]++;if(!(productType==='prepayList')){_context5.next=19;break;}cov_pa8ce6u63.b[1][0]++;_context5.next=17;return(0,_effects.call)(fetchPrepaidProductDetail,{payload:{subscriberId:subscriberId,productType:productType}});case 17:_context5.next=22;break;case 19:cov_pa8ce6u63.b[1][1]++;_context5.next=22;return(0,_effects.call)(fetchProductDetail,{payload:{subscriberId:subscriberId,productType:productType}});case 22:_context5.next=25;break;case 24:cov_pa8ce6u63.b[0][1]++;case 25:cov_pa8ce6u63.s[26]++;_context5.next=28;return(0,_effects.select)(productListSelector);case 28:productList=_context5.sent;productGroupList=(cov_pa8ce6u63.s[27]++,(0,_result2.default)(productList,''+productType,[]));selectedProduct=(cov_pa8ce6u63.s[28]++,(cov_pa8ce6u63.b[2][0]++,(0,_find2.default)(productGroupList,{subscriberId:subscriberId}))||(cov_pa8ce6u63.b[2][1]++,{}));cov_pa8ce6u63.s[29]++;_context5.next=34;return(0,_effects.put)(actions.setBillUsageProductCollapseStatus({productType:productType,subscriberId:subscriberId,isCollapsed:!selectedProduct.isCollapsed}));case 34:_context5.next=41;break;case 36:_context5.prev=36;_context5.t0=_context5['catch'](3);cov_pa8ce6u63.s[30]++;_context5.next=41;return(0,_effects.put)(actions.setBillUsageProductCollapseStatus({productType:productType,subscriberId:subscriberId,isCollapsed:true}));case 41:case'end':return _context5.stop();}}},_marked5,this,[[3,36]]);}function billUsageSaga(){return regeneratorRuntime.wrap(function billUsageSaga$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:cov_pa8ce6u63.f[5]++;cov_pa8ce6u63.s[31]++;_context6.next=4;return(
(0,_effects.takeEvery)(actions.GET_BILL_USAGE_PRODUCT_LIST,fetchProductList));case 4:cov_pa8ce6u63.s[32]++;_context6.next=7;return(
(0,_effects.takeEvery)(actions.GET_BILL_USAGE_PREPAID_PRODUCT_DETAIL,fetchPrepaidProductDetail));case 7:cov_pa8ce6u63.s[33]++;_context6.next=10;return(
(0,_effects.takeEvery)(actions.GET_BILL_USAGE_PRODUCT_BILL_DETAIL,fetchProductBillDetail));case 10:cov_pa8ce6u63.s[34]++;_context6.next=13;return(
(0,_effects.takeEvery)(actions.TOGGLE_BILL_USAGE_PRODUCT_COLLAPSE_STATUS,toggleProductCollapseStatus));case 13:case'end':return _context6.stop();}}},_marked6,this);}