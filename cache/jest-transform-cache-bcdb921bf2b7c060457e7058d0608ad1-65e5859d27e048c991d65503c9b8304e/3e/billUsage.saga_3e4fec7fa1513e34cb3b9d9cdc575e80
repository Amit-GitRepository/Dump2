Object.defineProperty(exports,"__esModule",{value:true});exports.productDetailSelector=exports.productListSelector=exports.msisdnSelector=undefined;var cov_pa8ce6u63=function(){var path='/Users/amitkumar/iTrueService/DevCode/iservice-app/app/redux/sagas/billUsage.saga.js',hash='538b6477d512de07265a2f9e65237a8be4b08105',global=new Function('return this')(),gcv='__coverage__',coverageData={path:'/Users/amitkumar/iTrueService/DevCode/iservice-app/app/redux/sagas/billUsage.saga.js',statementMap:{'0':{start:{line:10,column:30},end:{line:10,column:58}},'1':{start:{line:11,column:35},end:{line:11,column:71}},'2':{start:{line:12,column:37},end:{line:12,column:75}},'3':{start:{line:15,column:2},end:{line:21,column:3}},'4':{start:{line:16,column:19},end:{line:16,column:47}},'5':{start:{line:17,column:24},end:{line:17,column:69}},'6':{start:{line:18,column:4},end:{line:18,column:65}},'7':{start:{line:25,column:17},end:{line:25,column:45}},'8':{start:{line:26,column:38},end:{line:26,column:45}},'9':{start:{line:27,column:24},end:{line:27,column:85}},'10':{start:{line:28,column:2},end:{line:28,column:102}},'11':{start:{line:32,column:2},end:{line:38,column:3}},'12':{start:{line:33,column:40},end:{line:33,column:47}},'13':{start:{line:34,column:23},end:{line:34,column:80}},'14':{start:{line:35,column:4},end:{line:35,column:105}},'15':{start:{line:42,column:38},end:{line:42,column:45}},'16':{start:{line:43,column:2},end:{line:56,column:3}},'17':{start:{line:44,column:29},end:{line:44,column:64}},'18':{start:{line:45,column:34},end:{line:45,column:98}},'19':{start:{line:46,column:4},end:{line:48,column:5}},'20':{start:{line:47,column:6},end:{line:47,column:77}},'21':{start:{line:49,column:24},end:{line:49,column:57}},'22':{start:{line:50,column:29},end:{line:50,column:70}},'23':{start:{line:51,column:28},end:{line:51,column:72}},'24':{start:{line:52,column:4},end:{line:52,column:129}},'25':{start:{line:54,column:4},end:{line:54,column:105}},'26':{start:{line:69,column:2},end:{line:69,column:73}},'27':{start:{line:70,column:2},end:{line:70,column:86}},'28':{start:{line:71,column:2},end:{line:71,column:98}}},fnMap:{'0':{name:'fetchProductList',decl:{start:{line:14,column:17},end:{line:14,column:33}},loc:{start:{line:14,column:37},end:{line:22,column:1}},line:14},'1':{name:'fetchProductDetail',decl:{start:{line:24,column:17},end:{line:24,column:35}},loc:{start:{line:24,column:48},end:{line:29,column:1}},line:24},'2':{name:'fetchProductBillDetail',decl:{start:{line:31,column:17},end:{line:31,column:39}},loc:{start:{line:31,column:52},end:{line:39,column:1}},line:31},'3':{name:'toggleProductCollapseStatus',decl:{start:{line:41,column:17},end:{line:41,column:44}},loc:{start:{line:41,column:57},end:{line:57,column:1}},line:41},'4':{name:'billUsageSaga',decl:{start:{line:68,column:25},end:{line:68,column:38}},loc:{start:{line:68,column:42},end:{line:73,column:1}},line:68}},branchMap:{'0':{loc:{start:{line:46,column:4},end:{line:48,column:5}},type:'if',locations:[{start:{line:46,column:4},end:{line:48,column:5}},{start:{line:46,column:4},end:{line:48,column:5}}],line:46},'1':{loc:{start:{line:51,column:28},end:{line:51,column:72}},type:'binary-expr',locations:[{start:{line:51,column:28},end:{line:51,column:66}},{start:{line:51,column:70},end:{line:51,column:72}}],line:51}},s:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0,'18':0,'19':0,'20':0,'21':0,'22':0,'23':0,'24':0,'25':0,'26':0,'27':0,'28':0},f:{'0':0,'1':0,'2':0,'3':0,'4':0},b:{'0':[0,0],'1':[0,0]},_coverageSchema:'332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();exports.












fetchProductList=fetchProductList;exports.









fetchProductDetail=fetchProductDetail;exports.






fetchProductBillDetail=fetchProductBillDetail;exports.









toggleProductCollapseStatus=toggleProductCollapseStatus;exports.default=


























billUsageSaga;var _api=require('./api/api.saga');var _api2=_interopRequireDefault(_api);var _find=require('lodash/find');var _find2=_interopRequireDefault(_find);var _result=require('lodash/result');var _result2=_interopRequireDefault(_result);var _apiHelper=require('./api/apiHelper');var _effects=require('redux-saga/effects');var _common=require('../../utils/common.util');var _index=require('../actions/index.actions');var actions=_interopRequireWildcard(_index);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var _marked=regeneratorRuntime.mark(fetchProductList),_marked2=regeneratorRuntime.mark(fetchProductDetail),_marked3=regeneratorRuntime.mark(fetchProductBillDetail),_marked4=regeneratorRuntime.mark(toggleProductCollapseStatus),_marked5=regeneratorRuntime.mark(billUsageSaga);var msisdnSelector=exports.msisdnSelector=(cov_pa8ce6u63.s[0]++,(0,_common.getSelector)('msisdn.msisdn'));var productListSelector=exports.productListSelector=(cov_pa8ce6u63.s[1]++,(0,_common.getSelector)('billUsage.productList'));var productDetailSelector=exports.productDetailSelector=(cov_pa8ce6u63.s[2]++,(0,_common.getSelector)('billUsage.productDetail'));function fetchProductList(){var msisdn,productList;return regeneratorRuntime.wrap(function fetchProductList$(_context){while(1){switch(_context.prev=_context.next){case 0:cov_pa8ce6u63.f[0]++;cov_pa8ce6u63.s[3]++;_context.prev=2;cov_pa8ce6u63.s[4]++;_context.next=6;return(0,_effects.select)(msisdnSelector);case 6:msisdn=_context.sent;cov_pa8ce6u63.s[5]++;_context.next=10;return(0,_effects.call)(_api2.default,(0,_apiHelper.billUsageProductList)(msisdn));case 10:productList=_context.sent;cov_pa8ce6u63.s[6]++;_context.next=14;return(0,_effects.put)(actions.setBillUsageProductList(productList.body));case 14:_context.next=18;break;case 16:_context.prev=16;_context.t0=_context['catch'](2);case 18:case'end':return _context.stop();}}},_marked,this,[[2,16]]);}function fetchProductDetail(_ref){var payload=_ref.payload;var msisdn,_ref2,subscriberId,productType,productDetail;return regeneratorRuntime.wrap(function fetchProductDetail$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:cov_pa8ce6u63.f[1]++;cov_pa8ce6u63.s[7]++;_context2.next=4;return(0,_effects.select)(msisdnSelector);case 4:msisdn=_context2.sent;_ref2=(cov_pa8ce6u63.s[8]++,payload),subscriberId=_ref2.subscriberId,productType=_ref2.productType;cov_pa8ce6u63.s[9]++;_context2.next=9;return(0,_effects.call)(_api2.default,(0,_apiHelper.billUsageProductDetail)(msisdn,subscriberId));case 9:productDetail=_context2.sent;cov_pa8ce6u63.s[10]++;_context2.next=13;return(0,_effects.put)(actions.setBillUsageProductDetail({productType:productType,subscriberId:subscriberId,data:productDetail.body}));case 13:case'end':return _context2.stop();}}},_marked2,this);}function fetchProductBillDetail(_ref3){var payload=_ref3.payload;var _ref4,subscriberId,productType,billDetail;return regeneratorRuntime.wrap(function fetchProductBillDetail$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:cov_pa8ce6u63.f[2]++;cov_pa8ce6u63.s[11]++;_context3.prev=2;_ref4=(cov_pa8ce6u63.s[12]++,payload),subscriberId=_ref4.subscriberId,productType=_ref4.productType;cov_pa8ce6u63.s[13]++;_context3.next=7;return(0,_effects.call)(_api2.default,(0,_apiHelper.billUsageProductBillDetail)(subscriberId));case 7:billDetail=_context3.sent;cov_pa8ce6u63.s[14]++;_context3.next=11;return(0,_effects.put)(actions.setBillUsageProductBillDetail({productType:productType,subscriberId:subscriberId,data:billDetail.body}));case 11:_context3.next=15;break;case 13:_context3.prev=13;_context3.t0=_context3['catch'](2);case 15:case'end':return _context3.stop();}}},_marked3,this,[[2,13]]);}function toggleProductCollapseStatus(_ref5){var payload=_ref5.payload;var _ref6,subscriberId,productType,allProductDetail,selectedProductDetail,productList,productGroupList,selectedProduct;return regeneratorRuntime.wrap(function toggleProductCollapseStatus$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:cov_pa8ce6u63.f[3]++;_ref6=(cov_pa8ce6u63.s[15]++,payload),subscriberId=_ref6.subscriberId,productType=_ref6.productType;cov_pa8ce6u63.s[16]++;_context4.prev=3;cov_pa8ce6u63.s[17]++;_context4.next=7;return(0,_effects.select)(productDetailSelector);case 7:allProductDetail=_context4.sent;selectedProductDetail=(cov_pa8ce6u63.s[18]++,(0,_result2.default)(allProductDetail,productType+'.'+subscriberId,null));cov_pa8ce6u63.s[19]++;if(selectedProductDetail){_context4.next=17;break;}cov_pa8ce6u63.b[0][0]++;cov_pa8ce6u63.s[20]++;_context4.next=15;return(0,_effects.call)(fetchProductDetail,{payload:{subscriberId:subscriberId,productType:productType}});case 15:_context4.next=18;break;case 17:cov_pa8ce6u63.b[0][1]++;case 18:cov_pa8ce6u63.s[21]++;_context4.next=21;return(0,_effects.select)(productListSelector);case 21:productList=_context4.sent;productGroupList=(cov_pa8ce6u63.s[22]++,(0,_result2.default)(productList,''+productType,[]));selectedProduct=(cov_pa8ce6u63.s[23]++,(cov_pa8ce6u63.b[1][0]++,(0,_find2.default)(productGroupList,{subscriberId:subscriberId}))||(cov_pa8ce6u63.b[1][1]++,{}));cov_pa8ce6u63.s[24]++;_context4.next=27;return(0,_effects.put)(actions.setBillUsageProductCollapseStatus({productType:productType,subscriberId:subscriberId,isCollapsed:!selectedProduct.isCollapsed}));case 27:_context4.next=34;break;case 29:_context4.prev=29;_context4.t0=_context4['catch'](3);cov_pa8ce6u63.s[25]++;_context4.next=34;return(0,_effects.put)(actions.setBillUsageProductCollapseStatus({productType:productType,subscriberId:subscriberId,isCollapsed:true}));case 34:case'end':return _context4.stop();}}},_marked4,this,[[3,29]]);}function billUsageSaga(){return regeneratorRuntime.wrap(function billUsageSaga$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:cov_pa8ce6u63.f[4]++;cov_pa8ce6u63.s[26]++;_context5.next=4;return(
(0,_effects.takeEvery)(actions.GET_BILL_USAGE_PRODUCT_LIST,fetchProductList));case 4:cov_pa8ce6u63.s[27]++;_context5.next=7;return(
(0,_effects.takeEvery)(actions.GET_BILL_USAGE_PRODUCT_BILL_DETAIL,fetchProductBillDetail));case 7:cov_pa8ce6u63.s[28]++;_context5.next=10;return(
(0,_effects.takeEvery)(actions.TOGGLE_BILL_USAGE_PRODUCT_COLLAPSE_STATUS,toggleProductCollapseStatus));case 10:case'end':return _context5.stop();}}},_marked5,this);}