Object.defineProperty(exports,"__esModule",{value:true});exports.productDetailSelector=exports.productListSelector=exports.thaiIDSelector=exports.msisdnSelector=undefined;var cov_pa8ce6u63=function(){var path='/Users/amitkumar/iTrueService/DevCode/iservice-app/app/redux/sagas/billUsage.saga.js',hash='64b0d5e019862719f6ff7f8a3d14d58da40947b2',global=new Function('return this')(),gcv='__coverage__',coverageData={path:'/Users/amitkumar/iTrueService/DevCode/iservice-app/app/redux/sagas/billUsage.saga.js',statementMap:{'0':{start:{line:10,column:30},end:{line:10,column:71}},'1':{start:{line:11,column:30},end:{line:11,column:64}},'2':{start:{line:12,column:35},end:{line:12,column:71}},'3':{start:{line:13,column:37},end:{line:13,column:75}},'4':{start:{line:16,column:2},end:{line:23,column:3}},'5':{start:{line:17,column:19},end:{line:17,column:47}},'6':{start:{line:18,column:19},end:{line:18,column:47}},'7':{start:{line:19,column:24},end:{line:19,column:77}},'8':{start:{line:20,column:4},end:{line:20,column:65}},'9':{start:{line:27,column:17},end:{line:27,column:45}},'10':{start:{line:28,column:38},end:{line:28,column:45}},'11':{start:{line:29,column:24},end:{line:29,column:85}},'12':{start:{line:30,column:2},end:{line:30,column:102}},'13':{start:{line:34,column:2},end:{line:40,column:3}},'14':{start:{line:35,column:37},end:{line:35,column:44}},'15':{start:{line:36,column:23},end:{line:36,column:77}},'16':{start:{line:37,column:4},end:{line:37,column:91}},'17':{start:{line:44,column:2},end:{line:51,column:3}},'18':{start:{line:45,column:19},end:{line:45,column:47}},'19':{start:{line:46,column:40},end:{line:46,column:47}},'20':{start:{line:47,column:33},end:{line:47,column:94}},'21':{start:{line:48,column:4},end:{line:48,column:111}},'22':{start:{line:55,column:38},end:{line:55,column:45}},'23':{start:{line:56,column:2},end:{line:71,column:3}},'24':{start:{line:57,column:29},end:{line:57,column:64}},'25':{start:{line:58,column:34},end:{line:58,column:98}},'26':{start:{line:59,column:4},end:{line:63,column:5}},'27':{start:{line:61,column:6},end:{line:62,column:79}},'28':{start:{line:64,column:24},end:{line:64,column:57}},'29':{start:{line:65,column:29},end:{line:65,column:70}},'30':{start:{line:66,column:28},end:{line:66,column:72}},'31':{start:{line:67,column:4},end:{line:67,column:129}},'32':{start:{line:69,column:4},end:{line:69,column:105}},'33':{start:{line:85,column:2},end:{line:85,column:73}},'34':{start:{line:86,column:2},end:{line:86,column:92}},'35':{start:{line:87,column:2},end:{line:87,column:86}},'36':{start:{line:88,column:2},end:{line:88,column:98}}},fnMap:{'0':{name:'fetchProductList',decl:{start:{line:15,column:17},end:{line:15,column:33}},loc:{start:{line:15,column:37},end:{line:24,column:1}},line:15},'1':{name:'fetchProductDetail',decl:{start:{line:26,column:17},end:{line:26,column:35}},loc:{start:{line:26,column:48},end:{line:31,column:1}},line:26},'2':{name:'fetchProductBillDetail',decl:{start:{line:33,column:17},end:{line:33,column:39}},loc:{start:{line:33,column:52},end:{line:41,column:1}},line:33},'3':{name:'fetchPrepaidProductDetail',decl:{start:{line:43,column:17},end:{line:43,column:42}},loc:{start:{line:43,column:55},end:{line:52,column:1}},line:43},'4':{name:'toggleProductCollapseStatus',decl:{start:{line:54,column:17},end:{line:54,column:44}},loc:{start:{line:54,column:57},end:{line:72,column:1}},line:54},'5':{name:'billUsageSaga',decl:{start:{line:84,column:25},end:{line:84,column:38}},loc:{start:{line:84,column:42},end:{line:90,column:1}},line:84}},branchMap:{'0':{loc:{start:{line:59,column:4},end:{line:63,column:5}},type:'if',locations:[{start:{line:59,column:4},end:{line:63,column:5}},{start:{line:59,column:4},end:{line:63,column:5}}],line:59},'1':{loc:{start:{line:61,column:6},end:{line:62,column:78}},type:'cond-expr',locations:[{start:{line:61,column:39},end:{line:61,column:116}},{start:{line:62,column:8},end:{line:62,column:78}}],line:61},'2':{loc:{start:{line:66,column:28},end:{line:66,column:72}},type:'binary-expr',locations:[{start:{line:66,column:28},end:{line:66,column:66}},{start:{line:66,column:70},end:{line:66,column:72}}],line:66}},s:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0,'6':0,'7':0,'8':0,'9':0,'10':0,'11':0,'12':0,'13':0,'14':0,'15':0,'16':0,'17':0,'18':0,'19':0,'20':0,'21':0,'22':0,'23':0,'24':0,'25':0,'26':0,'27':0,'28':0,'29':0,'30':0,'31':0,'32':0,'33':0,'34':0,'35':0,'36':0},f:{'0':0,'1':0,'2':0,'3':0,'4':0,'5':0},b:{'0':[0,0],'1':[0,0],'2':[0,0]},_coverageSchema:'332fd63041d2c1bcb487cc26dd0d5f7d97098a6c'},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();exports.













fetchProductList=fetchProductList;exports.










fetchProductDetail=fetchProductDetail;exports.






fetchProductBillDetail=fetchProductBillDetail;exports.









fetchPrepaidProductDetail=fetchPrepaidProductDetail;exports.










toggleProductCollapseStatus=toggleProductCollapseStatus;exports.default=





























billUsageSaga;var _api=require('./api/api.saga');var _api2=_interopRequireDefault(_api);var _find=require('lodash/find');var _find2=_interopRequireDefault(_find);var _result=require('lodash/result');var _result2=_interopRequireDefault(_result);var _apiHelper=require('./api/apiHelper');var _effects=require('redux-saga/effects');var _common=require('../../utils/common.util');var _index=require('../actions/index.actions');var actions=_interopRequireWildcard(_index);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var _marked=regeneratorRuntime.mark(fetchProductList),_marked2=regeneratorRuntime.mark(fetchProductDetail),_marked3=regeneratorRuntime.mark(fetchProductBillDetail),_marked4=regeneratorRuntime.mark(fetchPrepaidProductDetail),_marked5=regeneratorRuntime.mark(toggleProductCollapseStatus),_marked6=regeneratorRuntime.mark(billUsageSaga);var msisdnSelector=exports.msisdnSelector=(cov_pa8ce6u63.s[0]++,(0,_common.getSelector)('user.profile.trueid.mobile'));var thaiIDSelector=exports.thaiIDSelector=(cov_pa8ce6u63.s[1]++,(0,_common.getSelector)('user.profile.idcard'));var productListSelector=exports.productListSelector=(cov_pa8ce6u63.s[2]++,(0,_common.getSelector)('billUsage.productList'));var productDetailSelector=exports.productDetailSelector=(cov_pa8ce6u63.s[3]++,(0,_common.getSelector)('billUsage.productDetail'));function fetchProductList(){var msisdn,thaiID,productList;return regeneratorRuntime.wrap(function fetchProductList$(_context){while(1){switch(_context.prev=_context.next){case 0:cov_pa8ce6u63.f[0]++;cov_pa8ce6u63.s[4]++;_context.prev=2;cov_pa8ce6u63.s[5]++;_context.next=6;return(0,_effects.select)(msisdnSelector);case 6:msisdn=_context.sent;cov_pa8ce6u63.s[6]++;_context.next=10;return(0,_effects.select)(thaiIDSelector);case 10:thaiID=_context.sent;cov_pa8ce6u63.s[7]++;_context.next=14;return(0,_effects.call)(_api2.default,(0,_apiHelper.billUsageProductList)(msisdn,thaiID));case 14:productList=_context.sent;cov_pa8ce6u63.s[8]++;_context.next=18;return(0,_effects.put)(actions.setBillUsageProductList(productList.body));case 18:_context.next=22;break;case 20:_context.prev=20;_context.t0=_context['catch'](2);case 22:case'end':return _context.stop();}}},_marked,this,[[2,20]]);}function fetchProductDetail(_ref){var payload=_ref.payload;var msisdn,_ref2,subscriberId,productType,productDetail;return regeneratorRuntime.wrap(function fetchProductDetail$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:cov_pa8ce6u63.f[1]++;cov_pa8ce6u63.s[9]++;_context2.next=4;return(0,_effects.select)(msisdnSelector);case 4:msisdn=_context2.sent;_ref2=(cov_pa8ce6u63.s[10]++,payload),subscriberId=_ref2.subscriberId,productType=_ref2.productType;cov_pa8ce6u63.s[11]++;_context2.next=9;return(0,_effects.call)(_api2.default,(0,_apiHelper.billUsageProductDetail)(msisdn,subscriberId));case 9:productDetail=_context2.sent;cov_pa8ce6u63.s[12]++;_context2.next=13;return(0,_effects.put)(actions.setBillUsageProductDetail({productType:productType,subscriberId:subscriberId,data:productDetail.body}));case 13:case'end':return _context2.stop();}}},_marked2,this);}function fetchProductBillDetail(_ref3){var payload=_ref3.payload;var _ref4,accountId,productType,billDetail;return regeneratorRuntime.wrap(function fetchProductBillDetail$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:cov_pa8ce6u63.f[2]++;cov_pa8ce6u63.s[13]++;_context3.prev=2;_ref4=(cov_pa8ce6u63.s[14]++,payload),accountId=_ref4.accountId,productType=_ref4.productType;cov_pa8ce6u63.s[15]++;_context3.next=7;return(0,_effects.call)(_api2.default,(0,_apiHelper.billUsageProductBillDetail)(accountId));case 7:billDetail=_context3.sent;cov_pa8ce6u63.s[16]++;_context3.next=11;return(0,_effects.put)(actions.setBillUsageProductBillDetail({productType:productType,data:billDetail.body}));case 11:_context3.next=15;break;case 13:_context3.prev=13;_context3.t0=_context3['catch'](2);case 15:case'end':return _context3.stop();}}},_marked3,this,[[2,13]]);}function fetchPrepaidProductDetail(_ref5){var payload=_ref5.payload;var msisdn,_ref6,subscriberId,productType,prepaidProductDetail;return regeneratorRuntime.wrap(function fetchPrepaidProductDetail$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:cov_pa8ce6u63.f[3]++;cov_pa8ce6u63.s[17]++;_context4.prev=2;cov_pa8ce6u63.s[18]++;_context4.next=6;return(0,_effects.select)(msisdnSelector);case 6:msisdn=_context4.sent;_ref6=(cov_pa8ce6u63.s[19]++,payload),subscriberId=_ref6.subscriberId,productType=_ref6.productType;cov_pa8ce6u63.s[20]++;_context4.next=11;return(0,_effects.call)(_api2.default,(0,_apiHelper.billUsagePrepaidDetail)(msisdn,subscriberId));case 11:prepaidProductDetail=_context4.sent;cov_pa8ce6u63.s[21]++;_context4.next=15;return(0,_effects.put)(actions.setBillUsageProductDetail({productType:productType,subscriberId:subscriberId,data:prepaidProductDetail.body}));case 15:_context4.next=19;break;case 17:_context4.prev=17;_context4.t0=_context4['catch'](2);case 19:case'end':return _context4.stop();}}},_marked4,this,[[2,17]]);}function toggleProductCollapseStatus(_ref7){var payload=_ref7.payload;var _ref8,subscriberId,productType,allProductDetail,selectedProductDetail,productList,productGroupList,selectedProduct;return regeneratorRuntime.wrap(function toggleProductCollapseStatus$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:cov_pa8ce6u63.f[4]++;_ref8=(cov_pa8ce6u63.s[22]++,payload),subscriberId=_ref8.subscriberId,productType=_ref8.productType;cov_pa8ce6u63.s[23]++;_context5.prev=3;cov_pa8ce6u63.s[24]++;_context5.next=7;return(0,_effects.select)(productDetailSelector);case 7:allProductDetail=_context5.sent;selectedProductDetail=(cov_pa8ce6u63.s[25]++,(0,_result2.default)(allProductDetail,productType+'.'+subscriberId,null));cov_pa8ce6u63.s[26]++;if(selectedProductDetail){_context5.next=24;break;}cov_pa8ce6u63.b[0][0]++;cov_pa8ce6u63.s[27]++;if(!(productType==='prepayList')){_context5.next=19;break;}cov_pa8ce6u63.b[1][0]++;_context5.next=17;return(0,_effects.call)(fetchPrepaidProductDetail,{payload:{subscriberId:subscriberId,productType:productType}});case 17:_context5.next=22;break;case 19:cov_pa8ce6u63.b[1][1]++;_context5.next=22;return(0,_effects.call)(fetchProductDetail,{payload:{subscriberId:subscriberId,productType:productType}});case 22:_context5.next=25;break;case 24:cov_pa8ce6u63.b[0][1]++;case 25:cov_pa8ce6u63.s[28]++;_context5.next=28;return(0,_effects.select)(productListSelector);case 28:productList=_context5.sent;productGroupList=(cov_pa8ce6u63.s[29]++,(0,_result2.default)(productList,''+productType,[]));selectedProduct=(cov_pa8ce6u63.s[30]++,(cov_pa8ce6u63.b[2][0]++,(0,_find2.default)(productGroupList,{subscriberId:subscriberId}))||(cov_pa8ce6u63.b[2][1]++,{}));cov_pa8ce6u63.s[31]++;_context5.next=34;return(0,_effects.put)(actions.setBillUsageProductCollapseStatus({productType:productType,subscriberId:subscriberId,isCollapsed:!selectedProduct.isCollapsed}));case 34:_context5.next=41;break;case 36:_context5.prev=36;_context5.t0=_context5['catch'](3);cov_pa8ce6u63.s[32]++;_context5.next=41;return(0,_effects.put)(actions.setBillUsageProductCollapseStatus({productType:productType,subscriberId:subscriberId,isCollapsed:true}));case 41:case'end':return _context5.stop();}}},_marked5,this,[[3,36]]);}function billUsageSaga(){return regeneratorRuntime.wrap(function billUsageSaga$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:cov_pa8ce6u63.f[5]++;cov_pa8ce6u63.s[33]++;_context6.next=4;return(
(0,_effects.takeEvery)(actions.GET_BILL_USAGE_PRODUCT_LIST,fetchProductList));case 4:cov_pa8ce6u63.s[34]++;_context6.next=7;return(
(0,_effects.takeEvery)(actions.GET_BILL_USAGE_PREPAID_PRODUCT_DETAIL,fetchPrepaidProductDetail));case 7:cov_pa8ce6u63.s[35]++;_context6.next=10;return(
(0,_effects.takeEvery)(actions.GET_BILL_USAGE_PRODUCT_BILL_DETAIL,fetchProductBillDetail));case 10:cov_pa8ce6u63.s[36]++;_context6.next=13;return(
(0,_effects.takeEvery)(actions.TOGGLE_BILL_USAGE_PRODUCT_COLLAPSE_STATUS,toggleProductCollapseStatus));case 13:case'end':return _context6.stop();}}},_marked6,this);}