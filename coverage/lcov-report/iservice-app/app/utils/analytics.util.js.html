<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for iservice-app/app/utils/analytics.util.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../../prettify.css" />
    <link rel="stylesheet" href="../../../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../../../index.html">All files</a> / <a href="index.html">iservice-app/app/utils</a> analytics.util.js
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">90% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>27/30</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">28.57% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>4/14</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">76.92% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>10/13</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">88.89% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>24/27</span>
      </div>
    </div>
  </div>
  <div class='status-line high'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">33x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">33x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">33x</span>
<span class="cline-any cline-yes">33x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">33x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">33x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">33x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">33x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">33x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">33x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">33x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">33x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">33x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">33x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">33x</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">672x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">33x</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">import Config from 'react-native-config';
import mapValues from 'lodash/mapValues';
import result from 'lodash/result';
import {deviceInfo, Platform} from './reactNative.util.js';
import {GoogleAnalyticsSettings, GoogleAnalyticsTracker} from 'react-native-google-analytics-bridge';
import {routeConfig} from '../routes/index.routes';
&nbsp;
/* setDryRun when enabled the native library prevents any data from being sent to Google Analytics.
   This allows you to test or debug the implementation, without your test data appearing in your Google Analytics reports.
*/
GoogleAnalyticsSettings.setDryRun(false);
&nbsp;
// setDispatchInterval allows you to configure how often (in seconds) the batches are sent to your tracker.
GoogleAnalyticsSettings.setDispatchInterval(parseInt(Config.GA_TRACKER_INTERVAL));
&nbsp;
// Google Analytics Tracker object
const trackerID = (Platform.OS === 'ios') ? Config.GA_TRACKER_ID_IOS : <span class="branch-1 cbranch-no" title="branch not covered" >Config.GA_TRACKER_ID_ANDROID;</span>
export const tracker = new GoogleAnalyticsTracker(trackerID,
  {SSOID: 1, APP_NAME: 2, CLIENT_ID: 3, LAT_LONG: 4, FB_ID: 5, DEVICE_ID: 6});
&nbsp;
// Google Analytics custom dimensions
let customDimensions = {
  SSOID: 'anonymous',
  APP_NAME: 'iService',
  CLIENT_ID: '',
  LAT_LONG: '',
  FB_ID: '',
  DEVICE_ID: result(deviceInfo, 'id', '')
};
&nbsp;
// setter function for custom dimension
export const setDimension = <span class="fstat-no" title="function not covered" >(d</span>imension) =&gt; {
<span class="cstat-no" title="statement not covered" >  customDimensions = {...customDimensions, ...dimension};</span>
};
&nbsp;
// Google Analytics Tracker Methods
&nbsp;
export const setUser = (userId) =&gt; {
  tracker.setUser(userId);
};
&nbsp;
export const setAppName = (appName) =&gt; {
  tracker.setAppName(appName);
};
&nbsp;
export const setAppVersion = (appVersion) =&gt; {
  tracker.setAppVersion(appVersion);
};
&nbsp;
/**
category (required): String, category of event
  action (required): String, name of action
  optionalValues: Object
      label: String
      value: Number
*/
export const trackEvent = (category, action, optionalValues = <span class="branch-0 cbranch-no" title="branch not covered" >{})</span> =&gt; {
  tracker.trackEventWithCustomDimensionValues(category, action, optionalValues, customDimensions);
};
&nbsp;
export const trackTiming = <span class="fstat-no" title="function not covered" >(c</span>ategory, value, optionalValues = <span class="branch-0 cbranch-no" title="branch not covered" >{})</span> =&gt; {
<span class="cstat-no" title="statement not covered" >  tracker.trackTiming(category, value, optionalValues);</span>
};
&nbsp;
// Enable tracking of uncaught exceptions
export const setTrackUncaughtExceptions = (enabled = true) =&gt; {
  tracker.setTrackUncaughtExceptions(enabled);
};
&nbsp;
/**
error: String, a description of the exception (up to 100 characters), accepts nil
fatal (required): Boolean, indicates whether the exception was fatal, defaults to false
*/
export const trackException = (error, fatal = <span class="branch-0 cbranch-no" title="branch not covered" >false)</span> =&gt; {
  tracker.trackException(error, fatal);
};
&nbsp;
/**
product (required): Object
    id (required): String
    name (required): String
    category (optional): String
    brand (optional): String
    variant (optional): String
    price (optional): Number
    quantity (optional): Number
    couponCode (optional): String
&nbsp;
transaction (required): Object
    id (required): String
    affiliation (optional): String, an entity with which the transaction should be affiliated (e.g. a particular store)
    revenue (optional): Number
    tax (optional): Number
    shipping (optional): Number
    couponCode (optional): String
*/
export const trackPurchaseEvent = (product = <span class="branch-0 cbranch-no" title="branch not covered" >{id: '', name: ''},</span> transaction = <span class="branch-0 cbranch-no" title="branch not covered" >{id: ''},</span> eventCategory = 'Ecommerce', eventAction = 'Purchase') =&gt; {
  tracker.trackPurchaseEvent(product, transaction, eventCategory, eventAction);
};
&nbsp;
export const trackMultiProductsPurchaseEvent = <span class="fstat-no" title="function not covered" >(p</span>roducts = <span class="branch-0 cbranch-no" title="branch not covered" >[],</span> transaction = <span class="branch-0 cbranch-no" title="branch not covered" >{},</span> eventCategory = <span class="branch-0 cbranch-no" title="branch not covered" >'Ecommerce',</span> eventAction = <span class="branch-0 cbranch-no" title="branch not covered" >'Purchase')</span> =&gt; {
<span class="cstat-no" title="statement not covered" >  tracker.trackMultiProductsPurchaseEventWithCustomDimensionValues(products, transaction, eventCategory, eventAction, customDimensions);</span>
};
&nbsp;
export const getRouteMap = (routeConfig) =&gt; mapValues(routeConfig, (routeInfo) =&gt; result(routeInfo, 'gaScreenName', ''));
&nbsp;
// Config for screen tracking
export const getScreenTrackingConfig = () =&gt; ({
  tracker,
  navStoreKey: 'nav',
  navActions: ['Navigation/NAVIGATE', 'Navigation/BACK', 'Navigation/RESET'],
  gaRouteMap: getRouteMap(routeConfig),
  customDimensions
});
&nbsp;
// ****** In discussion: LatLong requirement in custom dimension ******
// export const getLocation = () =&gt; new Promise((resolve, reject) =&gt; {
//   navigator.geolocation.getCurrentPosition((product) =&gt; {
//     const latLong = [product.coords.latitude, product.coords.longitude];
//     resolve(latLong);
//   }, reject);
// });
//
// export const getScreenTrackingConfig = () =&gt; getLocation().then((latLong) =&gt; {
//   setDimension({LAT_LONG: latLong.join(',')});
//   const screenTrackingConfig = {
//     tracker,
//     navStoreKey: 'nav',
//     navActions: ['Navigation/NAVIGATE', 'Navigation/BACK', 'Navigation/RESET'],
//     gaRouteMap,
//     customDimensions: customDimensions
//   };
//   return screenTrackingConfig;
// });
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="https://istanbul.js.org/" target="_blank">istanbul</a> at Sun Dec 03 2017 16:14:06 GMT+0530 (IST)
</div>
</div>
<script src="../../../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../../../sorter.js"></script>
</body>
</html>
